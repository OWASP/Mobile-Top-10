---

layout: col-sidebar
title: "M7: 客戶端程式碼品質不佳"
---

# Threat Agents

**應用層面 特定**

威脅主體包括可以將不受信任的輸入傳遞給行動程式碼內的方法呼叫的實體。這類問題本身不一定是安全問題，但會導致安全漏洞。例如，在舊版本的Safari中發生的緩衝區溢出（一種低品質程式碼漏洞）導致高風險的攻擊。低品質程式碼問題通常會被惡意軟體或釣魚詐騙進行利用。 

# 攻擊媒介	

**利用難度 困難**

攻擊者通常會通過向受害者提供精心製作的輸入來利用此類漏洞。這些輸入被傳遞到存在於行動裝置內的程式碼中，利用就在這裡發生。典型的攻擊類型將會利用記憶體洩漏和緩衝區溢出。

# 安全層面的強度	

**普及性 常見** <br />
**偵測性 困難**

程式碼品質問題在大多數行動程式碼中都相當普遍。好消息是，大多數程式碼品質問題通常為良性，只是由於編程實踐不佳而產生。通常很難通過手動程式碼審查來檢測這些類型的問題。相反，攻擊者將使用執行靜態分析或進行模糊測試的第三方工具。這類工具通常會識別內存洩漏、緩衝區溢出和其他較不嚴重的問題，這些問題導致編程實踐不佳。具有極底層知識和專業技術的駭客能夠有效地利用這類問題。典型的主要目標是在行動程式碼的地址空間內執行外部程式碼。

# 技術性影響	

**影響程度 中等**

這個漏洞的技術影響相當於透過行動裝置利用相關漏洞的技術影響（在OWASP十大中定義）。
		 	
例如，攻擊者可能透過行動裝置利用跨站腳本（Cross-Site Scripting，XSS）漏洞。這對應於OWASP十大的A3 - XSS類別，技術影響為中度。

# 業務影響
	
**應用程式/業務 特定** 
		
這類漏洞對業務的影響因攻擊性質而有很大變化。程式碼品質差的問題可能導致以下業務影響:
- 信息被盜竊;
- 聲望受損;
- 智慧財產權被盜竊

此類漏洞中的其他較不嚴重的技術問題可能導致性能降低、內存使用增加或前端架構不佳

# 我是否容易受到「程式碼品質不佳」的攻擊?

這是行動客戶端程式碼層面實行問題的總稱。這與伺服器端編碼錯誤有所不同。這涵蓋了來自漏洞（如緩衝區溢出、格式字符串漏洞以及各種其他程式碼層面的錯誤）的風險，其中解決方案是重新編寫在行動裝置上運行的某些程式碼。

這與不當使用平台不同，因為它通常指的是編程語言本身（例如，Java、Swift、Objective C、JavaScript）。C語言中的緩衝區溢出或Webview行動應用程式中的基於DOM的XSS將屬於程式碼品質問題。

這種風險的關鍵特徵是，它是在行動裝置上執行的程式碼，並且需要在局部的地方進行更改。修復大多數風險都需要進行程式碼更改，但在程式碼品質的案例，風險來自於使用錯誤的API、不安全地使用API、使用不安全的語言構造或其他程式碼層面的問題。重要的是：這不是在伺服器上運行的程式碼。這是一種在行動裝置上執行的糟糕程式碼的風險。

# 如何防止「客戶端程式碼品質不佳」?

一班來說，可以通過以下方式避免程式碼品質問題：

- 維持組織中每個人都同意的一致編碼模式;
- 撰寫易於閱讀並且有良好文檔的程式碼;
- 在使用緩衝區時，總是驗證任何傳入緩衝區數據的長度不會超過目標緩衝區的長度;
- 通過使用第三方靜態分析工具，通過自動化來識別緩衝區溢出和內存泄漏; 
- 將解決緩衝區溢出和內存泄漏的問題列於最優先處理事項，相較於其他"程式碼品質"問題。

# Example Attack Scenarios

**Scenario #1:** 攻擊情境舉例:

```
include <stdio.h>

 int main(int argc, char **argv)
 {
    char buf[8]; // buffer for eight characters
    gets(buf); // read from stdio (sensitive function!)
    printf("%s\n", buf); // print out data stored in buf
    return 0; // 0 as return value
 }
```

在這個例子中[this](https://www.owasp.org/index.php/Buffer_overflow_attack) ，我們應該避免使用gets函數以防止緩衝區溢出。這是大多數靜態分析工具通常會報告為程式碼品質問題的一個例子。

# 參考資料

- OWASP
  - [Buffer Overflow Examples](https://www.owasp.org/index.php/Buffer_overflow_attack)
- External
  - [External References](http://cwe.mitre.org/)